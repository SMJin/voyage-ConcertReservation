## 🎯 시나리오 개요

공연 예매 오픈 직후 수많은 유저가 동시에 몰리는 상황을 가정하고,
"대기열 기반 예약 시스템"을 설계했습니다.
단순한 좌석 예약이 아니라, 대기열 통과 → 좌석 임시 배정 → 결제 완료까지의 흐름이
정해진 순서와 시간 제한, 그리고 동시성 제어 안에서 이뤄지도록 구현하려고 합니다.

##### 주요 고려사항
- 대기열을 통과한 유저만 좌석 예약 가능하도록 제한
- 좌석은 5분간 임시 배정 → 시간이 지나면 자동 해제
- 결제 시에만 좌석이 최종 확정되도록 처리
- 다중 인스턴스 환경에서 데이터 충돌이 없도록 Redis 활용

##### 주요 제약사항
- 다수 인스턴스 환경에서 일관성 있는 대기열 처리
- 동시 좌석 예약 시 중복 배정 방지
- 임시 좌석 배정은 5분 후 자동 만료되도록 설정
- 대기열 정보는 UUID 및 TTL 기반으로 관리

---

## 핵심 기능 요약

| 기능 | 설명 |
|------|------|
| 유저 토큰 발급 | 대기열 순서를 포함한 토큰 발급 (UUID 기반), 이후 모든 API에서 검증 |
| 날짜 / 좌석 조회 | 예약 가능한 날짜 및 해당 날짜의 잔여 좌석을 조회 |
| 좌석 예약 요청 | 예약 시 좌석은 Redis에 저장되어 5분간 임시 배정 상태 유지 |
| 잔액 충전 및 조회 | 사용자 별 잔액 충전 및 현재 잔액 조회 가능 |
| 결제 처리 | 결제 완료 시 좌석 확정 + 토큰 만료 처리 (이중 예약 방지) |